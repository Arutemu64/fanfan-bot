{% for player in players %}
{% if player.username %}
{% set original = player.username %}
{% set length = original|length %}
{% set num_mask = (length * 0.4) | int %}
{% set start = ((length - num_mask) / 2) | int %}
{% set masked = original[:start] ~ ('*' * num_mask) ~ original[start + num_mask:] %}
{% else %}
{% set original = "ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹" %}
{% set masked = "ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹" %}
{% endif %}
{% if player.rank == 1 %}ğŸ¥‡
{%- elif player.rank == 2 %}ğŸ¥ˆ
{%- elif player.rank == 3 %}ğŸ¥‰
{%- else %}  {{player.rank}}  {% endif %} <b>{{ original if player.user_id == current_user_id else masked}}{% if player.user_id == current_user_id %} ğŸ’–{% endif %}</b> â€” {{player.points}} ğŸ’° â€¢ {{player.achievements_count}} ğŸ¯
{% endfor %}